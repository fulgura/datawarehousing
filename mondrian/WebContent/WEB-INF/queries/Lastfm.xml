<?xml version="1.0"?>
<Schema name="Lastfm">

	<Dimension name="Artist">
		<Hierarchy hasAll="true" allMemberName="All Artists"
			primaryKey="artist_id">
			<Table name="d_artist" />
			<Level name="Artist" column="name" uniqueMembers="true" />
			<Property name="Picture" column="pictureurl"
				dependsOnLevelValue="true" />
			<Property name="Url" column="url" dependsOnLevelValue="true" />
		</Hierarchy>
	</Dimension>
	<Dimension name="Tag">
		<Hierarchy hasAll="true" allMemberName="All Tags"
			primaryKey="tag_id">
			<Table name="d_tag" />
			<Level name="Tag" column="tagvalue" uniqueMembers="true" />
		</Hierarchy>
	</Dimension>
	<Dimension name="User">
		<Hierarchy hasAll="true" allMemberName="All Users"
			primaryKey="user_id">
			<Table name="d_user" />
			<Level name="Gender" column="gender" uniqueMembers="true" />
			<Level name="Name" column="name" uniqueMembers="true" />
			<Property name="Age" column="age" type="Numeric"
				dependsOnLevelValue="true" />
		</Hierarchy>
	</Dimension>
	<Dimension name="Time" type="TimeDimension">
		<Hierarchy hasAll="true" allMemberName="All Periods"
			primaryKey="id">
			<Table name="d_date_hierarchy" />
			<Level name="Year" column="year" uniqueMembers="true"
				levelType="TimeYears" type="Numeric" />
			<Level name="Quarter" column="quarter" uniqueMembers="false"
				ordinalColumn="quarter" nameColumn="quarter_name" levelType="TimeQuarters" />
			<Level name="Month" column="month" uniqueMembers="false"
				ordinalColumn="month" nameColumn="month_name" levelType="TimeMonths" type="Numeric" />
			<Level name="Day" column="dayofmonth" uniqueMembers="false"
				levelType="TimeDays" type="Numeric" />
		</Hierarchy>
	</Dimension>

	<Cube name="Tagging">
		<Table name="f_tagging" />
		<DimensionUsage name="Artist" source="Artist" foreignKey="artist_id"/>
		<DimensionUsage name="Tag" source="Tag" foreignKey="tag_id"/>
		<DimensionUsage name="User" source="User" foreignKey="user_id"/>
		<DimensionUsage name="Time" source="Time" foreignKey="date_hierarchy_id"/>
		<Measure name="Tagging Count" column="tagging_id" aggregator="count"
			formatString="Standard" />
	</Cube>
	
	<Cube name="Listening">
		<Table name="f_listening" />
		<DimensionUsage name="Artist" source="Artist" foreignKey="artist_id"/>
		<DimensionUsage name="User" source="User" foreignKey="user_id"/>
		<DimensionUsage name="Time" source="Time" foreignKey="date_hierarchy_id"/>
		<Measure name="Tagging Count" column="listening_id" aggregator="count"
			formatString="Standard" />
	</Cube>
	
</Schema>